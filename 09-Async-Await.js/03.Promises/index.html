<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Promises</title>
  </head>

  <body>
    <img src="" alt="" class="src" />
    <script>
      fetch("https://dog.ceo/api/breeds/image/rando")
        .then((response) => {
          return response.json();
        })
        .then((data) => {
          document.querySelector("img").src = data.message;
        })
        .catch((error) => {
          console.log("there is an error" + error);
        })
        .finally(() => {
          console.log("I will always run");
        });

      //try catch finally with promises
      function getOutOfBed() {
        return new Promise((resolve) => {
          console.log("out of bed");
          resolve();
        });
      }

      function walkToKeys() {
        return new Promise((resolve) => {
          console.log("walk to keys");
          resolve();
        });
      }

      function openCarDoor() {
        return new Promise((resolve) => {
          console.log("open car door");
          resolve();
        });
      }

      function driveCar() {
        return new Promise((resolve) => {
          console.log("drive car");
          resolve();
        });
      }

      function completeTask() {
        return getOutOfBed()
          .then(() => walkToKeys())
          .then(() => openCarDoor())
          .then(() => driveCar());
      }

      // Using try-catch-finally with Promises
      async function executeTask() {
        try {
          await completeTask();
        } catch (error) {
          console.error("An error occurred:", error);
        } finally {
          console.log("Task completed!");
        }
      }

      // Run the task
      executeTask();
    </script>
  </body>
</html>
